<!doctype html>
<html lang="es">

<head>
  <title>DOCKER ADMIN</title>
  <!-- Required meta tags -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<script>
  onload = () => {
    document.getElementById('btnSwitch').addEventListener('click', () => {
      if (document.documentElement.getAttribute('data-bs-theme') == 'dark') {
        document.documentElement.setAttribute('data-bs-theme', 'light');
        document.getElementById('btnSwitch').innerHTML = '<i class="fa-solid fa-moon fa-xl"></i>';
      }
      else {
        document.documentElement.setAttribute('data-bs-theme', 'dark');
        document.getElementById('btnSwitch').innerHTML = '<i class="fa-solid fa-sun fa-xl"></i>';
      }
    })
  }
</script>

<body>

  <header class="d-flex flex-wrap justify-content-center p-3 mb-4 border-bottom bg-body sticky-top">
    <a href="/" class="d-flex align-items-center mx-4 link-body-emphasis text-decoration-none">
      <img src="resources/images/logoLight.png" alt="" width="100" height="100" />
    </a>

    <nav class="navbar navbar-expand-sm">
      <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav nav-pills text-center">
            <li class="nav-item"><a href="#inicio" class="nav-link active" aria-current="page">Inicio</a></li>
            <li class="nav-item"><a href="#servicios" class="nav-link">Servicios</a></li>
            <button id="btnSwitch" class="btn"><i class="fa-solid fa-moon fa-xl"></i></button>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <main data-bs-spy="scroll" data-bs-target="#navbarNav" data-bs-smooth-scroll="true" data-bs-offset="-150">

    <!-- INICIO -->
    <div id="inicio" class="container">
      <div class="row align-items-center g-lg-5">
        <div class="col-md-10 mx-auto col-xl-6">
          <form id="loginForm" class="p-4 p-md-5 border rounded-3 bg-body-tertiary">
            <h1 class="display-4 fw-bold lh-1 mb-3 text-center">Login</h1>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="username" name="username" maxlength="50" placeholder=""
                required>
              <label for="username">Usuario</label>
            </div>
            <div class="form-floating mb-3">
              <input type="password" class="form-control" id="password" name="password" maxlength="50" placeholder=""
                required>
              <label for="password">Contraseña</label>
            </div>
            <button class="w-100 btn btn-lg btn-primary" type="submit"></i>Enviar</button>
          </form>
        </div>

        <div class="col-md-10 mx-auto col-xl-6">
          <form id="registerForm" class="p-4 p-md-5 border rounded-3 bg-body-tertiary">
            <h1 class="display-4 fw-bold lh-1 mb-3 text-center">Alta</h1>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="username" name="username" maxlength="50" placeholder=""
                required>
              <label for="username">Usuario</label>
            </div>
            <div class="form-floating mb-3">
              <input type="password" class="form-control" id="password" name="password" maxlength="50" placeholder=""
                required>
              <label for="password">Contraseña</label>
            </div>
            <button class="w-100 btn btn-lg btn-primary" type="submit"></i>Enviar</button>
          </form>
        </div>
      </div>
      <hr class="my-5">
    </div>

    <!-- SERVICIOS -->
    <div id="servicios" class="container" id="icon-grid">
      <h1 class="display-4 fw-bold lh-1 text-center mb-5">Servicios de limpieza</h1>

      <div class="row row-cols-1 row-cols-sm-2 gx-4 justify-content-center">
        <div class="feature col text-center mb-4">
          <i class="fa-solid fa-building fa-2xl text-primary"></i>
          <div class="mt-2">
            <h2 class="fw-bold mb-0 fs-4 text-body-emphasis">Oficinas</h2>
            <p class="text-body-secondary">Consigue la mejor limpieza para tu oficina al mejor precio.</p>
          </div>
        </div>

        <div class="feature col text-center mb-4">
          <i class="fa-solid fa-user-group fa-2xl text-primary"></i>
          <div class="mt-2">
            <h2 class="fw-bold mb-0 fs-4 text-body-emphasis">Comunidades</h2>
            <p class="text-body-secondary">Limpiezas periódicas para comunidades de vecinos.</p>
          </div>
        </div>
      </div>

      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 gx-4 my-md-5 justify-content-center">
        <div class="feature col text-center mb-4">
          <i class="fa-solid fa-house fa-2xl text-primary"></i>
          <div class="mt-2">
            <h2 class="fw-bold mb-0 fs-4 text-body-emphasis">Particulares</h2>
            <p class="text-body-secondary">Puedes tener la limpieza que necesitas, con personal de confianza en base a
              tus exigencias.</p>
          </div>
        </div>

        <div class="feature col text-center mb-4">
          <i class="fa-solid fa-house-user fa-2xl text-primary"></i>
          <div class="mt-2">
            <h2 class="fw-bold mb-0 fs-4 text-body-emphasis">Pisos turísticos</h2>
            <p class="text-body-secondary">Equipo de dos personas y maquinaria de gran potencia para garantizar
              una rápida y eficiente limpieza.</p>
          </div>
        </div>

        <div class="feature col text-center mb-4">
          <i class="fa-solid fa-house-fire fa-2xl text-primary"></i>
          <div class="mt-2">
            <h2 class="fw-bold mb-0 fs-4 text-body-emphasis">Incendios</h2>
            <p class="text-body-secondary">Efectiva retirada del hollín para devolverle a tu casa el aspecto
              que tenía.</p>
          </div>
        </div>
      </div>

      <div class="row row-cols-1 row-cols-sm-2 gx-4 justify-content-center">
        <div class="feature col text-center mb-4">
          <i class="fa-solid fa-calculator fa-2xl text-primary"></i>
          <div class="mt-2">
            <h2 class="fw-bold mb-0 fs-4 text-body-emphasis">Especializadas</h2>
            <p class="text-body-secondary">Servicios especializados para necesidades específicas.</p>
          </div>
        </div>

        <div class="feature col text-center mb-4">
          <i class="fa-solid fa-helmet-safety fa-2xl text-primary"></i>
          <div class="mt-2">
            <h2 class="fw-bold mb-0 fs-4 text-body-emphasis">A medida</h2>
            <!--
            <p class="text-body-secondary">Limpieza profunda, para eliminar todo el polvo, a particulares o fincas que hayan tenido una obra
              recientemente. Limpieza de tapicerías, colchones, sofás...</p>
            -->
            <p class="text-body-secondary">Limpieza profunda a particulares o fincas que hayan tenido una obra
              recientemente.</p>
          </div>
        </div>
      </div>
      <hr class="my-5">
    </div>
  </main>

  <main class="form-signin w-100">
    <form id="testForm">
      <button class="btn btn-primary w-100 py-2" type="submit">Test</button>
    </form>
    <button class="btn btn-primary w-100 py-2" type="button" onclick="logout()">Logout</button>
  </main>

  <footer class="py-3 my-4">
    <p class="text-center text-body-secondary">&copy; 2025 LOLIMPIO S.L. </p>
  </footer>

  <!-- Modal Success -->
  <div class="modal fade" id="modalSuccess" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Información</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Mensaje enviado correctamente.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Error -->
  <div class="modal fade" id="modalError" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Error</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Error al enviar el mensaje.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const loginForm = document.getElementById('loginForm');
    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(loginForm).entries());

      const res = await fetch('/api/usuario/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      const result = await res.json();
      console.log(result);
      if (result.ok) {
        const modalSuccess = new bootstrap.Modal(document.getElementById('modalSuccess'));
        modalSuccess.show();
        loginForm.reset();
      } else {
        const modalError = new bootstrap.Modal(document.getElementById('modalError'));
        modalError.show();
      }
    });

    
    const registerForm = document.getElementById('registerForm');
    registerForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(registerForm).entries());

      const res = await fetch('/api/usuario/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      const result = await res.json();
      console.log(result);
      if (result.ok) {
        const modalSuccess = new bootstrap.Modal(document.getElementById('modalSuccess'));
        modalSuccess.show();
        registerForm.reset();
      } else {
        const modalError = new bootstrap.Modal(document.getElementById('modalError'));
        modalError.show();
      }
    });
  </script>
  <script src="js/usuarios.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
    crossorigin="anonymous"></script>
</body>

</html>